<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>Mouth XY í…ŒìŠ¤íŠ¸</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/6.5.10/browser/pixi.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/live2dcubismcore@1.0.2/live2dcubismcore.min.js"></script>
  <script src="https://unpkg.com/pixi-live2d-display@0.4.0/dist/cubism4.min.js"></script>
</head>
<style>
  canvas {
    height: 500px;
    object-fit: cover;
  }
  .grid {
    position: absolute;
    top: 10px;
    left: 10px;
    display: grid;
    grid-template-columns: repeat(3, auto);
    gap: 8px;
    background: rgba(255, 255, 255, 0.05);
    padding: 10px;
    border-radius: 8px;
  }
  button {
    padding: 8px 12px;
    font-size: 0.9rem;
    cursor: pointer;
  }
</style>
<body style="margin: 0; overflow: hidden; background-color: #282c34">
  <canvas id="canvas" style="margin-top: 100px"></canvas>

  <!-- ë²„íŠ¼ 3x3 ê²©ìž UI -->
  <div class="grid">
    <button onclick="setMouth(-1, 0)">Form -1 / Open 0</button>
    <button onclick="setMouth(0, 0)">Form 0 / Open 0</button>
    <button onclick="setMouth(1, 0)">Form 1 / Open 0</button>

    <button onclick="setMouth(-1, 0.5)">Form -1 / Open 0.5</button>
    <button onclick="setMouth(0, 0.5)">Form 0 / Open 0.5</button>
    <button onclick="setMouth(1, 0.5)">Form 1 / Open 0.5</button>

    <button onclick="setMouth(-1, 1)">Form -1 / Open 1</button>
    <button onclick="setMouth(0, 1)">Form 0 / Open 1</button>
    <button onclick="setMouth(1, 1)">Form 1 / Open 1</button>
  </div>

  <script>
    let model;

    const app = new PIXI.Application({
      view: document.getElementById("canvas"),
      width: window.innerWidth,
      height: window.innerHeight,
      backgroundColor: 0x282c34,
      resizeTo: window,
    });

    PIXI.live2d.Live2DModel.from(
      "./model/haru/runtime/haru_greeter_t05.model3.json"
    ).then((loadedModel) => {
      model = loadedModel;
      model.scale.set(0.5);
      model.x = app.renderer.width / 2.5;
      model.y = app.renderer.height * 1.5;
      model.anchor.set(0.5, 0.5);
      app.stage.addChild(model);
    });

    function setMouth(form, openY) {
      if (model) {
        model.internalModel.coreModel.setParameterValueById("ParamMouthForm", form);
        model.internalModel.coreModel.setParameterValueById("ParamMouthOpenY", openY);
        console.log(`ðŸŸ  Form: ${form}, OpenY: ${openY}`);
      }
    }
  </script>
</body>
</html>
